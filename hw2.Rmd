Homework 1 - [Your team name here]
========================================================

### Task 0 - Load the data

```{r}
suppressMessages(library(dplyr))
load("lego_sales.RData")
```


### Task 1 - Tidying the data

Intialize the Data Frame
```{r}
# find top level names
name0 = sales %>% unlist(recursive=FALSE) %>% names() %>% unique()

# identify subcatorgy names and number of rows
sum_n = setNames(numeric(length(name0)), name0)
cat_name = list()
for (n in name0) {
    sum_n[n] = sapply(sales, function(x) length(x[[n]])) %>% sum()
    cat_name[n] = sapply(sales, function(x) names(unlist(x[[n]]))) %>%                               unique()
}
# removes catagories without subcatagory names
name = c(name0, unlist(cat_name, use.names=FALSE))

# intialize the data frame given the extents discovered above
lego_df = data.frame(matrix(nrow = max(sum_n), ncol = length(name)))
colnames(lego_df) = name
```

Fill the Data Frame
```{r}
for (j in cat_name[[i]]) {
        lego_df[j] = sapply(sales, function(x) 
                        sapply(x[[i]], function(x) x[[j]])) %>%
                        unlist()
}
```

```{r}
# recursively fill in the purchases subcatagories
for (i in name0) {
    lego_df[i] = sapply(sales, function(x) 
        rep(x[[i]], length.out = length(x[['purchases']]))) %>%
            unlist()
}
```


## Task 2 - Processing the data

1. What was the most common first name of purchasers? Last name?

```{r}

```

2. What are the five most popular lego sets based on these data?

```{r}
```

3. Which five customers have spent the most money so far and how much have they spent?

```{r}
```

4. Which lego theme has made the most money for lego?

```{r}
```

5. Do men or women buy more lego sets (per person) on average?

```{r}
```

6. What are the five most popular hobbies of lego purchasers?

```{r}
```

7. How many total pieces have been purchased from lego by these customers?

```{r}
```

8. What state has spent the most money on legos? Hint - customer area codes may prove useful for this.

```{r}
```
